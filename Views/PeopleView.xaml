<UserControl x:Class="congress_cucuta.Views.PeopleView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:congress_cucuta.Views"
             mc:Ignorable="d" 
             d:DesignHeight="480" d:DesignWidth="640">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <Style TargetType = "Button">
            <Setter Property = "FontFamily" Value = "Candara"/>
            <Setter Property = "FontSize" Value = "16"/>
            <Setter Property = "Padding" Value = "4"/>
        </Style>
        <Style TargetType = "TextBlock">
            <Setter Property = "FontFamily" Value = "Nirmala UI"/>
            <Setter Property = "FontSize" Value = "16"/>
        </Style>
        <Style TargetType = "DataGrid">
            <Setter Property = "AutoGenerateColumns" Value = "False"/>
            <Setter Property = "CanUserAddRows" Value = "False"/>
            <Setter Property = "CanUserDeleteRows" Value = "False"/>
            <Setter Property = "CanUserResizeRows" Value = "False"/>
            <Setter Property = "CanUserSortColumns" Value = "False"/>
            <Setter Property = "HeadersVisibility" Value = "Column"/>
        </Style>
        <Style x:Key = "Error" TargetType = "TextBlock" BasedOn = "{StaticResource {x:Type TextBlock}}">
            <Setter Property = "Foreground" Value = "Red"/>
            <Setter Property = "FontSize" Value = "12"/>
        </Style>
        <Style x:Key = "Watermark" TargetType = "TextBlock">
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding = "{Binding Text, ElementName = NameBox}" Value = ""/>
                        <Condition Binding = "{Binding Path = IsFocused, ElementName = NameBox}" Value = "False"/>
                    </MultiDataTrigger.Conditions>

                    <Setter Property = "Visibility" Value = "Visible"/>
                </MultiDataTrigger>
            </Style.Triggers>

            <Setter Property = "Visibility" Value = "Collapsed"/>
            <Setter Property = "Foreground" Value = "Gray"/>
            <Setter Property = "IsHitTestVisible" Value = "False"/>
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height = "1*"/>
            <RowDefinition Height = "8*"/>
            <RowDefinition Height = "1*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width = "1*"/>
            <ColumnDefinition Width = "4*"/>
            <ColumnDefinition Width = "1*"/>
            <ColumnDefinition Width = "8*"/>
            <ColumnDefinition Width = "1*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Row = "1" Grid.Column = "1" VerticalAlignment = "Top">
            <TextBlock HorizontalAlignment = "Center" Margin = "0, 0, 0, 6">
                Add participants:
            </TextBlock>
            <Grid Margin = "0, 0, 0, 24">
                <TextBlock Style = "{StaticResource Watermark}" Text = "Name" Panel.ZIndex = "1" Margin = "4, 0, 0, 0"/>
                <TextBox x:Name = "NameBox" Text = "{Binding Name, UpdateSourceTrigger = PropertyChanged}"/>
            </Grid>
            <Button Content = "Add" Command = "{Binding AddNameCommand}" Margin = "0, 0, 0, 24"/>
            <Button Content = "Remove" Command = "{Binding RemoveNameCommand}"/>
        </StackPanel>
        <StackPanel Grid.Row = "1"
                    Grid.Column = "1"
                    VerticalAlignment = "Bottom">
            <TextBlock Grid.Row = "2"
                       Style = "{StaticResource Error}"
                       Visibility = "{Binding WasCreationFailure, Converter = {StaticResource BooleanToVisibilityConverter}}"
                       HorizontalAlignment = "Center"
                       Margin = "6">
                Failed to create simulation
            </TextBlock>
            <Button Grid.Row = "1" Grid.Column = "1" Content = "Begin" Command = "{Binding FinishInputCommand}"/>
        </StackPanel>
        <DataGrid Grid.Row = "1"
                  Grid.Column = "3"
                  ItemsSource = "{Binding Names}"
                  SelectedIndex = "{Binding SelectedIdx}">
            <DataGrid.Columns>
                <DataGridTextColumn Header = "Name" Width = "*" Binding = "{Binding Name}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
