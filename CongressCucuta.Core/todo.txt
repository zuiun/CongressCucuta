try to decouple event logic and split some methods up further, especially SimulationContext
